import type { HeartEventDef } from '@/types'

/** 所有心事件定义 */
export const HEART_EVENTS: HeartEventDef[] = [
  // ============================================================
  // 柳娘 (liu_niang) —— 村长的女儿，温柔聪慧
  // ============================================================
  {
    id: 'liu_niang_heart_3',
    npcId: 'liu_niang',
    requiredFriendship: 100,
    title: '溪边诗卷',
    scenes: [
      {
        text: '你沿着桃花溪散步，在一棵垂柳下发现了柳娘。她正倚着树干，手中捧着一卷泛黄的诗集，微风拂过，几瓣桃花落在书页上。'
      },
      {
        text: '柳娘抬起头，微微一笑："你也来这里散心吗？这是我最喜欢的读书地方，溪水的声音像天然的琴音。"'
      },
      {
        text: '她翻开诗集，指着其中一首诗："这首你读过吗？「桃之夭夭，灼灼其华。之子于归，宜其室家。」每次读到这里，我都会想象古人写这首诗时的心情。"',
        choices: [
          {
            text: '"这首诗写的是对美好生活的向往，就像桃源乡一样。"',
            friendshipChange: 15,
            response:
              '柳娘的眼睛亮了起来："你也这样觉得吗？父亲给这个村子取名桃源乡，就是希望这里能像诗中描绘的那样美好。能遇到懂诗的人，真好。"'
          },
          {
            text: '"说实话，我对古诗不太了解……"',
            friendshipChange: 5,
            response: '柳娘轻轻笑了："没关系，诗的美妙之处在于感受，不在于懂不懂。你愿意坐下来听我读一首吗？"'
          },
          {
            text: '"比起读诗，我更喜欢干活。"',
            friendshipChange: -5,
            response: '柳娘的笑容淡了一些："勤劳当然是好事……不过，偶尔停下脚步也是需要的。"她低下头，继续翻着诗集。'
          }
        ]
      },
      {
        text: '夕阳渐渐西沉，溪面上浮着金色的光。柳娘合上诗集，站起身来。'
      },
      {
        text: '"今天聊得很开心。"她把一瓣夹在书里的干桃花递给你，"送给你，算是我们的……诗友之约吧。"她微微红了脸，转身沿着溪边小路走远了。'
      }
    ]
  },
  {
    id: 'liu_niang_heart_5',
    npcId: 'liu_niang',
    requiredFriendship: 200,
    title: '桃源秘事',
    scenes: [
      {
        text: '傍晚时分，柳娘找到你，神色有些凝重："你有空吗？我想带你去一个地方，有些事……我觉得应该告诉你。"'
      },
      {
        text: '她领你来到村后一座废弃的老祠堂前。推开吱呀作响的木门，里面供着一块古老的石碑，上面刻满了密密麻麻的小字。'
      },
      {
        text: '"这是桃源乡的族碑。"柳娘轻声说，"上面记载着两百年前的事。桃源乡并不是一个普通的村庄——它是当年一群人为了躲避战乱，翻山越岭找到这片隐秘山谷后建立的。他们在这里种桃树、修水渠，发誓再也不与外面的纷争有任何牵扯。"',
        choices: [
          {
            text: '"原来如此……难怪这里与世隔绝，像世外桃源一般。"',
            friendshipChange: 15,
            response:
              '柳娘点点头，眼眶微红："是啊。我的祖辈们世世代代守着这个秘密。父亲常说，桃源乡的宁静是用无数人的牺牲换来的，我们必须珍惜。"'
          },
          {
            text: '"你为什么要告诉我这些？"',
            friendshipChange: 10,
            response:
              '柳娘沉默了片刻，轻声道："因为你来到这里之后，一直在用心经营田庄，帮助乡亲们。我觉得……你是值得信任的人。而且，你祖父当年也知道这些。"'
          }
        ]
      },
      {
        text: '柳娘走到石碑前，用手轻轻拂去上面的灰尘："碑上还记着一段预言——「桃源之兴衰，系于后来者。若有赤心之人重耕此地，桃源可再现昔日之盛。」父亲一直相信，这个人就是你。"'
      },
      {
        text: '走出祠堂时，夜色已深，满天繁星。柳娘回头看了你一眼："谢谢你愿意听这些。这个秘密……以后就由我们一起守护吧。"月光下，她的目光温柔而坚定。'
      }
    ]
  },
  {
    id: 'liu_niang_heart_8',
    npcId: 'liu_niang',
    requiredFriendship: 300,
    title: '月下桃花',
    scenes: [
      {
        text: '深夜，你被一阵轻轻的敲门声惊醒。打开门，只见门前放着一封信笺，上面写着："今夜月圆，桃花园中有约。——柳娘"'
      },
      {
        text: '你来到村东的桃花园。月光如水，洒在漫天的桃花上，花瓣在夜风中缓缓飘落，宛如一场无声的花雨。柳娘站在园中央的老桃树下，一袭素色衣裙，发间别着一朵新开的桃花。'
      },
      {
        text: '"你来了。"她转过身，月光映着她的脸庞，"我一直在等你。"她走近几步，声音轻得像是怕惊散了花瓣，"有些话，我在心里藏了很久了……"'
      },
      {
        text: '柳娘低下头，双手绞着衣角："你来桃源乡之前，我以为我会一辈子守着这个小村庄，读我的诗，过平淡的日子。可是你来了以后，一切都不同了。我看着你开荒种田、帮助乡亲、让这片土地重新焕发生机……我的心里，也像是开了一片桃花。"她抬起头，眼中有泪光闪烁，"我……喜欢你。"',
        choices: [
          {
            text: '轻轻握住她的手："我也喜欢你，柳娘。从在溪边读诗的那天起。"',
            friendshipChange: 20,
            response:
              '柳娘的泪水终于落下，却笑得比桃花还灿烂："真的吗？我以为……我以为只是我一个人的心思。"她反握住你的手，十指相扣，"那从今以后，这片桃花园就是我们的约定之地。"'
          },
          {
            text: '"柳娘，我很感动，但我需要一些时间……"',
            friendshipChange: 0,
            response:
              '柳娘愣了一下，随即轻轻放开目光，微笑道："没关系，我等你。桃花每年都会开的……我的心意也不会变。"虽然在笑，但月光下她的眼眶微微泛红。'
          }
        ]
      },
      {
        text: '一阵夜风吹过，漫天桃花纷纷扬扬地落下。你和柳娘并肩站在花雨之中，月光温柔地笼罩着一切。这一刻，桃源乡真的像是人间仙境。远处隐约传来溪水的声音，像是这片土地在轻声祝福。'
      }
    ]
  },

  // ============================================================
  // 秋月 (qiu_yue) —— 渔家女，活泼开朗
  // ============================================================
  {
    id: 'qiu_yue_heart_3',
    npcId: 'qiu_yue',
    requiredFriendship: 100,
    title: '钓鱼比试',
    scenes: [
      {
        text: '秋月蹦蹦跳跳地跑过来，手里挥舞着两根鱼竿："嘿！闲着没事吧？跟我来，带你去一个好地方！保证你没去过！"不等你回答，她就拽着你的袖子往山里跑。'
      },
      {
        text: '穿过一片竹林，绕过几块大石头，眼前豁然开朗——一潭碧绿的深水，四周被巨石环抱，阳光透过树缝洒下斑驳的光影。水面平静如镜，偶尔有鱼跃出水面，泛起一圈圈涟漪。'
      },
      {
        text: '"这是我的秘密钓点！"秋月得意地叉着腰，"全村就我一个人知道！这里的鱼又大又肥，普通地方根本比不了。"她把一根鱼竿塞到你手里，眼睛亮晶晶的，"来吧，咱们比一场！谁在一炷香的时间内钓的鱼多，谁就赢！输的人请吃饭！"',
        choices: [
          {
            text: '"好啊！那我可不会让着你！"',
            friendshipChange: 15,
            response: '秋月哈哈大笑："这才对嘛！我最讨厌别人让着我了！来来来，准备好——开始！"她熟练地甩出鱼线，动作干净利落，一看就是行家。'
          },
          {
            text: '"我钓鱼技术不太行，你教教我吧。"',
            friendshipChange: 10,
            response:
              '秋月歪着脑袋看你，嘻嘻一笑："行吧，本姑娘大发慈悲教教你。看好了——手腕要轻，抛线要稳，最重要的是要有耐心。不过比试还是要比的！"'
          },
          {
            text: '"钓鱼有什么好比的……"',
            friendshipChange: -5,
            response: '秋月鼓起腮帮子，一脸不高兴："哼！钓鱼可是世界上最棒的事情！算了算了，不跟你计较，等你钓上一条大鱼就知道有多开心了！"'
          }
        ]
      },
      {
        text: '一炷香过后，你们数了数各自的收获。秋月钓了六条，你钓了三条。她笑得前仰后合："哈哈哈！你输啦！请我吃陈伯铺子里的桂花糕！不许赖账！"'
      },
      {
        text: '收拾鱼竿时，秋月忽然安静下来，望着水面说："其实……这个地方是我小时候爸妈带我来的。那时候我们一家三口坐在这里钓鱼，一坐就是一整天。"她回过头冲你笑了笑，"今天能跟你来这里，也很开心！下次再来比过！"'
      }
    ]
  },
  {
    id: 'qiu_yue_heart_5',
    npcId: 'qiu_yue',
    requiredFriendship: 200,
    title: '雨夜心事',
    scenes: [
      {
        text: '连日的暴雨让溪水暴涨，全村人都躲在屋里。你路过秋月家时，发现她的门虚掩着，屋里没有点灯。'
      },
      {
        text: '推门进去，借着闪电的光，你看到秋月蜷缩在窗边，抱着膝盖，脸上有泪痕。她看到你，慌忙擦了擦脸："你……你怎么来了？我没事，就是……不太喜欢下雨天。"'
      },
      {
        text: '你在她旁边坐下。沉默了很久，秋月才开口，声音很轻，失去了平日的活力："三年前……也是这样的暴雨天。我爸妈说要去下游看看水势，然后就再也没有回来。"她的声音开始颤抖，"村里人说他们被洪水冲走了……找了好久，什么都没找到。"',
        choices: [
          {
            text: '默默把外套披在她肩上，安静地陪着她。',
            friendshipChange: 20,
            response:
              '秋月愣了一下，然后眼泪再也忍不住了。她靠在你的肩膀上，哭了很久很久。等她平静下来，小声说："谢谢你……从他们走后，我一直告诉自己要笑着，不能让别人担心。可是下雨天的时候……我真的好想他们。"'
          },
          {
            text: '"秋月……你不用一个人扛着，难过的时候可以找我。"',
            friendshipChange: 15,
            response:
              '秋月的嘴角抖了抖，终于没忍住哭了出来："我……我一直以为自己很坚强。可是每次下雨，我就会想……如果那天我拦住他们，是不是一切都会不同？"她抹着眼泪，"你真的愿意听我说这些吗？"'
          }
        ]
      },
      {
        text: '雨渐渐小了，天边裂开一道缝，透出一缕微弱的光。秋月抬起头，红着眼睛看着那道光："我妈以前总说，雨后一定会出太阳。她还说，只要我一直笑着，他们就会在天上看着我笑。"'
      },
      {
        text: '秋月站起来，深吸一口气，然后转过身，露出一个虽然还带着泪水但已经明亮起来的笑容："好了！秋月才不会一直哭哭啼啼的呢！明天雨停了，我们去钓鱼吧。我爸妈最高兴看到我开开心心地钓鱼了。"她的眼睛闪着光，"而且……有你在，下雨天好像也没那么可怕了。"'
      }
    ]
  },
  {
    id: 'qiu_yue_heart_8',
    npcId: 'qiu_yue',
    requiredFriendship: 300,
    title: '夕照归舟',
    scenes: [
      {
        text: '秋月一大早就来找你，背着一个大竹篓，竹篓里塞得满满当当——鱼竿、鱼饵、干粮、还有一壶茶。"今天跟我出远门！去桃花溪下游的芦苇荡！我要教你我妈的独门绝技！"'
      },
      {
        text: '你们划着秋月家的小木船顺流而下。秋月坐在船头，双脚荡在水里，哼着一首渔歌。芦苇荡在金色的阳光下摇曳，水鸟不时掠过水面。"这首歌是我妈教我的，"她说，"她说唱着这首歌，鱼儿就会自己游过来。"'
      },
      {
        text: '到了一片开阔的水域，秋月认真起来。她手把手教你一种特殊的抛线方式——鱼线在空中画出一个漂亮的弧线，轻轻落在水面上，几乎没有溅起水花。"这叫「柳叶钩」，是我妈发明的。要诀是——手要像柳枝一样柔软，心要像湖水一样平静。"',
        choices: [
          {
            text: '认真学习，反复练习，直到抛出一个完美的柳叶钩。',
            friendshipChange: 15,
            response:
              '秋月看着你的鱼线在空中画出完美的弧线，眼睛睁得大大的："哇！你居然一下午就学会了！我当初练了整整一个月呢！"她开心得手舞足蹈，差点把船晃翻，"我妈要是看到了，肯定也会夸你的！"'
          },
          {
            text: '"这个技巧真厉害。你妈妈一定是个很了不起的人。"',
            friendshipChange: 15,
            response:
              '秋月用力地点点头，眼里闪着骄傲和思念交织的光："她是全桃源乡最厉害的钓手！比我还厉害一百倍！……我一直想把她的本事全学会，然后教给更多的人。这样她就永远不会被忘记。"'
          }
        ]
      },
      {
        text: '夕阳西下，整个芦苇荡被染成了橘红色。你们收了鱼竿，让小船在水面上慢慢地漂。秋月坐在船头，夕阳把她的侧脸映得柔和而明亮。'
      },
      {
        text: '忽然，秋月转过身来，认真地看着你。夕阳在她的眼睛里跳动。"我一直在想该怎么说……"她难得地有些扭捏，用手指绕着发梢，"你知道吗？自从你来了桃源乡，我每天都特别特别开心。以前我觉得自己一个人也可以，可是现在……"她深吸一口气，然后一股脑地说出来，"我喜欢你！超级喜欢！比喜欢钓鱼还喜欢！这已经是我能说出的最高级别的喜欢了！"说完她涨红了脸，把头埋进膝盖里。'
      }
    ]
  },

  // ============================================================
  // 阿石 (a_shi) —— 矿工，沉默寡言
  // ============================================================
  {
    id: 'a_shi_heart_3',
    npcId: 'a_shi',
    requiredFriendship: 100,
    title: '矿洞救援',
    scenes: [
      {
        text: '你正在矿洞深处采矿，忽然听到前方传来一声闷响，紧接着是岩石崩落的声音。你循着声音跑过去，在一处塌方的岩壁旁发现了阿石——他的左腿被一块落石压住，额头上有一道血痕，却咬着牙一声不吭。'
      },
      {
        text: '看到你，阿石微微皱了皱眉："……你怎么在这里。"他顿了顿，"别过来，可能还会塌。"',
        choices: [
          {
            text: '不顾他的劝阻，立刻冲过去搬开压在他腿上的石头。',
            friendshipChange: 20,
            response:
              '阿石愣住了，想说什么却没说出口。你用尽全力搬开了落石，扶他靠在安全的岩壁上。他低着头沉默了好一会儿，才挤出两个字："……谢谢。"'
          },
          {
            text: '"我去叫人来帮忙！你等着！"',
            friendshipChange: 10,
            response:
              '阿石张了张嘴，最终没有阻止你。等你带着村里人赶回来时，他还保持着原来的姿势，只是石壁上多了几道指甲刮过的痕迹。被救出来后，他对你点了点头："……辛苦了。"'
          },
          {
            text: '"这里太危险了，你怎么一个人跑这么深？"',
            friendshipChange: -5,
            response: '阿石的目光暗了暗："……采矿就是我的活。"他别过脸去，不再说话。虽然你最终还是帮他搬开了石头，但气氛变得沉默。'
          }
        ]
      },
      {
        text: '你帮阿石包扎好伤口，扶着他慢慢走出矿洞。一路上他的表情还是那样面无波澜，但你注意到他走路时刻意把重心偏向你这一边，好像在无声地依靠你。'
      },
      {
        text: '走到矿洞口时，阿石停下脚步。他从怀里摸出一块石头——表面粗糙，灰扑扑的，毫不起眼。"……给你。"他说，"看着不像，但里面有玉。"他的耳根微微发红，"我……不太会说谢谢。这个代替。"'
      }
    ]
  },
  {
    id: 'a_shi_heart_5',
    npcId: 'a_shi',
    requiredFriendship: 200,
    title: '水晶秘境',
    scenes: [
      {
        text: '一天清晨，阿石罕见地主动来找你。他站在你家门口，手里提着两盏矿灯，一言不发地看着你。等了一会儿，他才开口："……跟我来。有个地方……想给你看。"'
      },
      {
        text: '他带你进入矿洞，却没有走常规的通道，而是在一处不起眼的裂缝前停下。他侧身钻了进去，你跟在后面，弯弯曲曲地走了很久，通道越来越窄。就在你觉得快要走不动的时候，眼前忽然豁然开朗。'
      },
      {
        text: '你倒吸一口凉气——一个巨大的地下洞穴出现在面前。洞壁上密密麻麻地长满了水晶，有的晶莹剔透如冰，有的泛着淡紫色的幽光，有的呈现出温暖的琥珀色。矿灯的光照上去，整个洞穴像是一座流光溢彩的宫殿。',
        choices: [
          {
            text: '"阿石……这里太美了。谢谢你带我来。"',
            friendshipChange: 15,
            response:
              '阿石的嘴角几乎不可察觉地上扬了一下——这大概是你见过他最接近微笑的表情。"嗯。"他用矿灯照着一簇紫水晶，"……找了两年才找到这里。没告诉过别人。"'
          },
          {
            text: '"这些水晶一定值很多钱吧！"',
            friendshipChange: -5,
            response:
              '阿石的目光冷了一瞬，随即恢复了平静。"……不卖。"他简短地说。他走到一根巨大的水晶柱前，用粗糙的手指轻轻触碰它的表面，像是在抚摸一个脆弱的生命。'
          }
        ]
      },
      {
        text: '阿石在洞穴中央坐下来，把矿灯调暗。黑暗中，你惊奇地发现那些水晶竟然会自己发光——微弱的、柔和的光，像是地底的星空。"我小时候……怕黑。"阿石的声音在洞穴里回荡，"后来发现了这些会发光的石头。它们告诉我……黑暗里也有光。"'
      },
      {
        text: '他沉默了一会儿，又说："石头不会说话，不会骗人。我觉得……跟石头待在一起比跟人待在一起舒服。"他转过头看着你，矿灯的微光在他深色的眼睛里闪烁，"但是……你不一样。"他没有解释这句话的意思，站起身来，"走吧，该回去了。"'
      }
    ]
  },
  {
    id: 'a_shi_heart_8',
    npcId: 'a_shi',
    requiredFriendship: 300,
    title: '石中心意',
    scenes: [
      {
        text: '连续好几天没有看到阿石。陈伯说他把自己关在家里，叮叮当当地不知道在敲什么。你有些担心，决定去看看。'
      },
      {
        text: '你来到阿石家门口，敲了敲门。里面的声音突然停了。过了好一会儿，门才开了一条缝，阿石探出头来，脸上沾着石粉，头发乱糟糟的，手上还缠着好几处绷带。他看到是你，眼神慌了一下，把什么东西藏到身后："你……你怎么来了。我没事。"'
      },
      {
        text: '你注意到他身后的工作台上散落着各种工具——小锤、錾子、砂纸，还有很多打磨失败的碎石。角落里放着一本翻得起毛边的《宝石雕刻图谱》。',
        choices: [
          {
            text: '"阿石，你受伤了，让我帮你包扎一下。"',
            friendshipChange: 15,
            response:
              '阿石犹豫了一下，最终别扭地伸出手。你仔细地帮他重新包扎被錾子磨破的手指。他一直侧着脸不看你，但你能感觉到他的手指在微微发抖。"……谢谢。"他的声音小得几乎听不到。'
          },
          {
            text: '"你在做什么？能让我看看吗？"',
            friendshipChange: 10,
            response:
              '阿石身体僵住了，耳朵瞬间红透了。他沉默了好久好久，久到你以为他不会回答。然后他慢慢从身后把手拿出来——掌心里躺着一样东西。"……还没做好。"他小声说。'
          }
        ]
      },
      {
        text: '阿石终于下定了决心。他深吸一口气，从怀里掏出一个小布包，笨拙地递到你面前。你打开一看——是一枚吊坠，用那座水晶洞穴里的紫水晶打磨而成，晶莹剔透，在光线下折射出温柔的紫色光芒。吊坠的形状是一朵桃花，每一片花瓣都打磨得细致入微。'
      },
      {
        text: '阿石涨红了脸，嘴唇动了半天，说出来的话断断续续的："这个……做了很久。废了好多块……手也割了好多次。因为我……我不会说漂亮的话，也不会……像别人那样。"他紧紧攥着衣角，抬起头直视你的眼睛——你第一次在他的眼中看到这样炽热的光，"但是……我想把最好的石头，做成最好的东西，给最……最重要的人。"他的声音越来越小，最后几乎是用气音说的，"……是你。一直都是你。"'
      }
    ]
  }
]

/** 根据NPC ID获取其所有心事件 */
export const getHeartEventsForNpc = (npcId: string): HeartEventDef[] => {
  return HEART_EVENTS.filter(e => e.npcId === npcId)
}

/** 根据事件ID获取心事件定义 */
export const getHeartEventById = (id: string): HeartEventDef | undefined => {
  return HEART_EVENTS.find(e => e.id === id)
}
