import type { HeartEventDef } from '@/types'

/** 隐藏NPC心事件（使用 HeartEventDef 格式，requiredFriendship 对应缘分阈值） */
export const HIDDEN_NPC_HEART_EVENTS: HeartEventDef[] = [
  // ============================================================
  // 龙灵 — 3个心事件
  // ============================================================
  {
    id: 'long_ling_heart_1',
    npcId: 'long_ling',
    requiredFriendship: 800,
    title: '鳞光下的低语',
    scenes: [
      { text: '你来到瀑布边打坐，水雾中一道翠色鳞光若隐若现。龙灵的声音在水声中响起：' },
      { text: '「你是第一个能听见我声音的凡人……已有百年无人走近这潭水了。」' },
      {
        text: '龙灵的目光落在你身上，似乎在审视什么。',
        choices: [
          {
            text: '「为什么选择在这里栖息？」',
            friendshipChange: 30,
            response: '「此处灵脉交汇，是桃源乡气运所在。我守护的……不只是这潭水。」'
          },
          {
            text: '「你一定很寂寞吧。」',
            friendshipChange: 50,
            response: '龙灵沉默了很久，最终轻声说：「……寂寞是有的。」水面泛起微微涟漪。'
          }
        ]
      }
    ]
  },
  {
    id: 'long_ling_heart_2',
    npcId: 'long_ling',
    requiredFriendship: 1600,
    title: '龙珠之忆',
    scenes: [
      { text: '今夜月色格外明亮，瀑布潭水中映出一轮完整的月亮。龙灵的身形在月光下完整显现——一条通体翠绿的灵龙，优雅而威严。' },
      { text: '「你可知我的真名吗？」龙灵问道，声音中带着一丝期待。' },
      { text: '「千年前，我化形时曾有一个名字……沧澜。意为沧海微澜。」' },
      {
        text: '龙灵从水中托出一颗微微发光的珠子。「这是我的逆鳞下曾藏过的旧物。」',
        choices: [
          { text: '「我会好好珍惜的。」', friendshipChange: 50, response: '龙灵点头，水面泛起温柔的光：「你是唯一让我愿意取出它的人。」' },
          { text: '小心翼翼地接过珠子。', friendshipChange: 30, response: '珠子入手温凉，内有微弱的脉动，如同心跳。' }
        ]
      }
    ]
  },
  {
    id: 'long_ling_heart_3',
    npcId: 'long_ling',
    requiredFriendship: 2400,
    title: '沧澜之约',
    scenes: [
      { text: '暴风雨夜，瀑布水量暴涨。你冒雨赶来，发现龙灵正以灵力稳住即将决堤的潭水。' },
      { text: '「走开！」龙灵喝道，但声音中满是疲惫，「今夜灵脉紊乱……我撑不了多久。」' },
      {
        text: '你看到龙灵的鳞片开始暗淡，她的力量正在消耗殆尽。',
        choices: [
          {
            text: '冲进水中，将灵力供奉递给龙灵。',
            friendshipChange: 80,
            response: '你的行动让龙灵一愣。她接过供奉，灵力缓缓恢复。风雨渐息后，她轻声道：「……谢谢你。」'
          },
          {
            text: '在岸边为她祈祷，集中精神传递念头。',
            friendshipChange: 60,
            response: '一股温暖的力量从你心中涌出，龙灵感应到了。「你的心意……我收到了。」暴雨渐停。'
          }
        ]
      },
      { text: '风雨过后，龙灵第一次以人形出现在你面前——一位身着翠衣的女子。「从今往后，唤我沧澜便好。」' }
    ]
  },

  // ============================================================
  // 桃夭 — 3个心事件
  // ============================================================
  {
    id: 'tao_yao_heart_1',
    npcId: 'tao_yao',
    requiredFriendship: 800,
    title: '花语',
    scenes: [
      { text: '清晨，你发现农场的桃树下多了一圈不知名的小花。花瓣上还带着露水，散发着淡淡的甜香。' },
      { text: '桃夭从花丛中探出头来：「这些是我种的，好看吗？」她的笑容像春天本身。' },
      {
        text: '她摘下一朵小花递给你。',
        choices: [
          { text: '「很美，谢谢你。」', friendshipChange: 40, response: '桃夭笑得更灿烂了：「你喜欢就好。以后我每天都种一朵。」' },
          {
            text: '把花别在她耳边。',
            friendshipChange: 60,
            response: '桃夭愣了一下，脸颊泛起桃花般的红晕：「你……你做什么呀……」但她没有取下那朵花。'
          }
        ]
      }
    ]
  },
  {
    id: 'tao_yao_heart_2',
    npcId: 'tao_yao',
    requiredFriendship: 1600,
    title: '落花有意',
    scenes: [
      { text: '你发现桃夭独自坐在最古老的那棵桃树下，花瓣如雨般落下，她的身形在花雨中若隐若现。' },
      { text: '「这棵树……是我出生的地方。」她的声音很轻，「已经三百年了。每到春天，我都会回到这里。」' },
      {
        text: '你注意到她的手中捧着一片枯叶——桃树唯一枯黄的叶子。',
        choices: [
          {
            text: '「树生病了吗？」',
            friendshipChange: 30,
            response: '「不是……是我的根基在衰弱。」她看向你，「但自从你来了之后，这片土地又有了生机。」'
          },
          {
            text: '默默坐到她身边。',
            friendshipChange: 50,
            response: '桃夭靠过来，将头轻轻倚在你肩上。花瓣落在你们的头顶，像一场无声的祝福。'
          }
        ]
      }
    ]
  },
  {
    id: 'tao_yao_heart_3',
    npcId: 'tao_yao',
    requiredFriendship: 2400,
    title: '灵桃之心',
    scenes: [
      { text: '春末最后一天，你发现桃夭站在老桃树前，双手合十，全身散发着柔和的光芒。' },
      { text: '「我在做一件很重要的事。」她说，声音有些颤抖。「把我最后的灵力注入这棵树……这样它就能再活三百年。」' },
      { text: '「但代价是……我可能会沉睡很久。」' },
      {
        text: '你感到心中一紧。',
        choices: [
          {
            text: '握住她的手：「让我帮你分担。」',
            friendshipChange: 80,
            response: '你的体温透过指尖传递给她。桃夭睁大了眼睛——灵力不减反增。「原来……人的心意也可以成为灵力。」'
          },
          {
            text: '「我会每天照顾这棵树的。」',
            friendshipChange: 60,
            response: '桃夭微笑着点头：「有你在，我放心了。」她从树上摘下一颗金色的桃子递给你，「这是灵桃，是我的心意。」'
          }
        ]
      },
      { text: '老桃树重新焕发生机，枝头缀满了花苞。桃夭看着这一切，脸上是满足的笑容：「谢谢你，让我不再孤单。」' }
    ]
  },

  // ============================================================
  // 月兔 — 3个心事件
  // ============================================================
  {
    id: 'yue_tu_heart_1',
    npcId: 'yue_tu',
    requiredFriendship: 800,
    title: '药杵的节拍',
    scenes: [
      { text: '月光下的竹林里传来叮叮当当的声响。循声而去，你发现月兔正用玉杵捣着什么。' },
      { text: '「嘘——别吵！」她竖起耳朵（真的有兔耳朵在帽子下面），「我在配一种特殊的药。」' },
      {
        text: '她手忙脚乱地把各种草药扔进臼中，节拍越来越快。',
        choices: [
          { text: '帮她稳住药臼。', friendshipChange: 40, response: '「诶？你的手好稳啊！」月兔感激地笑了，「有你帮忙，这药一定能成。」' },
          {
            text: '跟着节拍一起打拍子。',
            friendshipChange: 50,
            response: '月兔一愣，随即咯咯笑起来：「你跟着一起捣的样子好有趣！」药杵发出的声响竟变成了悦耳的旋律。'
          }
        ]
      }
    ]
  },
  {
    id: 'yue_tu_heart_2',
    npcId: 'yue_tu',
    requiredFriendship: 1600,
    title: '月宫的秘密',
    scenes: [
      { text: '你发现月兔蹲在河边，盯着水中的月亮发呆。她的兔耳朵耷拉着，看起来很沮丧。' },
      { text: '「其实……我是偷跑下来的。」她小声说，「月宫里太无聊了，每天只有捣药、捣药、捣药……」' },
      {
        text: '她抬头看着天上的月亮：「可是有时候……我也会想念那里。」',
        choices: [
          {
            text: '「这里不好吗？」',
            friendshipChange: 30,
            response: '「这里很好！有花有草有好吃的！」她的耳朵竖了起来，「还有……你。」她赶紧低下头，耳朵尖红了。'
          },
          {
            text: '「你可以随时回去看看啊。」',
            friendshipChange: 50,
            response: '「嗯……但是回去了就不容易再下来了。」她看向你，「所以我选择留在这里。」'
          }
        ]
      }
    ]
  },
  {
    id: 'yue_tu_heart_3',
    npcId: 'yue_tu',
    requiredFriendship: 2400,
    title: '不归的月兔',
    scenes: [
      { text: '中秋夜，一道金光从天而降落在村外的山丘上。月兔紧张地抓住你的袖子：「他们来找我了……」' },
      { text: '天空中传来庄严的声音：「玉兔，月宫需要你归位。」' },
      {
        text: '月兔浑身发抖，但她看向你的眼神中充满了不舍。',
        choices: [
          {
            text: '「她已经找到了归处。」',
            friendshipChange: 80,
            response: '你的声音坚定而清晰。天空沉默了片刻，最终金光缓缓消散。月兔紧紧抱住你：「谢谢你……」'
          },
          {
            text: '握住她的手，不说话。',
            friendshipChange: 60,
            response: '月兔感受到你掌心的温度，深吸一口气，对着天空喊道：「我不回去了！」金光渐渐消散。'
          }
        ]
      },
      { text: '月光重归平静。月兔擦了擦眼角：「从今以后，这里就是我的月宫了。」' }
    ]
  },

  // ============================================================
  // 狐仙 — 3个心事件
  // ============================================================
  {
    id: 'hu_xian_heart_1',
    npcId: 'hu_xian',
    requiredFriendship: 800,
    title: '狐火谜题',
    scenes: [
      { text: '黄昏时分，村口出现了几团飘忽不定的蓝色火焰。村民们纷纷回避，只有你好奇地靠近。' },
      { text: '「哟，胆子不小嘛。」狐仙从火焰后走出，手中把玩着一颗琉璃珠。「来玩个游戏如何？」' },
      {
        text: '他伸出三只手——等等，三只？你揉了揉眼睛，确实只有两只手。一只手心里有珠子，另一只空的。「猜猜珠子在哪？」',
        choices: [
          {
            text: '指向他的左手。',
            friendshipChange: 20,
            response: '他摊开左手——空的。摊开右手——也是空的。珠子不知何时已经出现在你的口袋里。「下次再来玩呀。」'
          },
          {
            text: '「珠子在你袖子里。」',
            friendshipChange: 50,
            response: '狐仙一愣，随即大笑：「有意思！你是第一个不按规矩猜的人。」他抖了抖袖子，珠子真的掉了出来。'
          }
        ]
      }
    ]
  },
  {
    id: 'hu_xian_heart_2',
    npcId: 'hu_xian',
    requiredFriendship: 1600,
    title: '千年之约',
    scenes: [
      { text: '你在矿洞深处发现了一面古老的铜镜。当你擦去灰尘时，镜中映出的不是你的脸——而是一只九尾金狐。' },
      { text: '「看到了？那是千年前的我。」狐仙的声音从身后传来。他今天没有笑容，「那时候我还不会说人话。」' },
      { text: '「千年修行，化人形，学人语，品人情。」他看着镜子，「可越像人，就越孤独。」' },
      {
        text: '你从未见过他这样认真的表情。',
        choices: [
          {
            text: '「孤独不是坏事。」',
            friendshipChange: 30,
            response: '「哦？」他挑起眉毛，「说来听听。」你把自己初来桃源乡时的孤独告诉了他。他听完，轻声笑了：「看来我们是同类。」'
          },
          {
            text: '「你现在不孤独了。」',
            friendshipChange: 50,
            response: '狐仙沉默了很久，最终露出一个不同于以往的、真诚的微笑：「嗯，现在不了。」'
          }
        ]
      }
    ]
  },
  {
    id: 'hu_xian_heart_3',
    npcId: 'hu_xian',
    requiredFriendship: 2400,
    title: '幻与真',
    scenes: [
      { text: '一天夜里，你梦见了一片金色的旷野。狐仙站在远处，身后九条尾巴完全展开，金光灿烂。' },
      { text: '「这不是梦。」他说，「这是我的本相，我的世界。」' },
      { text: '他向你走来：「一千年来，我用幻术骗过无数人。但在你面前……我不想再用幻术了。」' },
      {
        text: '他伸出手。你注意到他的手在微微颤抖。',
        choices: [
          {
            text: '握住他的手。',
            friendshipChange: 80,
            response: '幻境碎裂，你回到了现实。但狐仙的手仍在你手中——温暖而真实。「这是第一次，我在凡人面前露出真容。」'
          },
          {
            text: '「不管是狐还是人，你都是你。」',
            friendshipChange: 60,
            response: '他的九尾缓缓收拢，金光消散，变回那个玩世不恭的少年模样。但他的眼中多了一丝从未有过的柔软。'
          }
        ]
      }
    ]
  },

  // ============================================================
  // 山翁 — 3个心事件
  // ============================================================
  {
    id: 'shan_weng_heart_1',
    npcId: 'shan_weng',
    requiredFriendship: 800,
    title: '山中一局棋',
    scenes: [
      { text: '你在矿洞深处发现了一个隐秘的石室。山翁盘膝坐在石桌前，面前摆着一盘棋。' },
      { text: '「来了？坐。」他示意对面的石凳。棋盘上的棋子散发着微弱的灵光。' },
      {
        text: '「这盘棋我已经下了三百年。」他看着棋盘说道。',
        choices: [
          { text: '「和谁下的？」', friendshipChange: 30, response: '「和自己。」他捋了捋胡须，「修炼修炼，说到底不过是和自己下棋。」' },
          {
            text: '尝试落一子。',
            friendshipChange: 50,
            response: '山翁看着你落子的位置，眼中闪过一丝惊讶：「妙手。三百年来第一次有人在这一处落子。」'
          }
        ]
      }
    ]
  },
  {
    id: 'shan_weng_heart_2',
    npcId: 'shan_weng',
    requiredFriendship: 1600,
    title: '师徒之缘',
    scenes: [
      { text: '山翁带你来到山顶。冬日的清晨，云海翻涌在脚下，日出将天边染成金红色。' },
      { text: '「老夫修行千年，见过无数风景。」他深吸一口气，「但这个日出……每次看都觉得是新的。」' },
      {
        text: '他转向你：「小友，老夫有个不情之请。」',
        choices: [
          {
            text: '「前辈请说。」',
            friendshipChange: 30,
            response: '「你可愿做老夫的关门弟子？不学仙术，只学养生之道。」他的眼神真诚，「老夫所学，不想失传。」'
          },
          { text: '恭敬地行礼。', friendshipChange: 50, response: '山翁欣慰地笑了：「你的心性比许多修行百年的人都好。老夫认你这个徒弟。」' }
        ]
      }
    ]
  },
  {
    id: 'shan_weng_heart_3',
    npcId: 'shan_weng',
    requiredFriendship: 2400,
    title: '传道',
    scenes: [
      { text: '冬至这天，山翁让你在雪地中打坐。寒风刺骨，但他说：「心静自然暖。」' },
      { text: '你不知道过了多久。当你睁开眼时，发现周围的雪已经融化了一圈——是你身体散发的热量。' },
      { text: '「成了。」山翁拍手大笑，「凡人之体，却能引动天地灵气。你是老夫见过最有天赋的。」' },
      {
        text: '他从怀中取出一个古朴的葫芦：「这是老夫的随身宝物。」',
        choices: [
          {
            text: '「弟子不敢受。」',
            friendshipChange: 60,
            response: '「让你拿着就拿着！」他塞到你手里，「老夫不需要它了。有你在，比任何宝物都好。」他的眼中有泪光闪过。'
          },
          {
            text: '双手郑重接过。',
            friendshipChange: 80,
            response: '「好。」山翁点头，「从今以后，你就是桃源乡的守山人。老夫……终于可以放心了。」'
          }
        ]
      }
    ]
  },

  // ============================================================
  // 归女 — 3个心事件
  // ============================================================
  {
    id: 'gui_nv_heart_1',
    npcId: 'gui_nv',
    requiredFriendship: 800,
    title: '织机声',
    scenes: [
      { text: '深夜，你被一阵若有若无的织机声吸引到村口老井旁。月光下，一台半透明的织机凭空出现。' },
      { text: '归女坐在织机前，纤细的手指穿梭于丝线之间。她织的不是布——是月光本身。' },
      {
        text: '她注意到你，手上的动作顿了顿：「你……能看到我在织什么吗？」',
        choices: [
          {
            text: '「月光？」',
            friendshipChange: 40,
            response: '她轻轻笑了：「对。我把月光织成梦。每个月圆之夜，桃源乡的人都能做个好梦……就是我织的。」'
          },
          {
            text: '「很美的东西。」',
            friendshipChange: 50,
            response: '她低下头，声音很轻：「已经很久……没有人说过我织的东西美了。」丝线在她手中发出柔和的光。'
          }
        ]
      }
    ]
  },
  {
    id: 'gui_nv_heart_2',
    npcId: 'gui_nv',
    requiredFriendship: 1600,
    title: '故乡的方向',
    scenes: [
      { text: '归女今天没有在织布。她站在村口，面朝北方，身形比平时更加虚幻。' },
      { text: '「我在找故乡的方向。」她说，声音像风中的丝线。「可是……我已经忘了故乡在哪。」' },
      { text: '「我只记得那里有一棵很大很大的桑树，树下有一架织机。每天织布、染色、晾晒……那时候我还活着。」' },
      {
        text: '一滴银色的泪珠落在地上，化作一朵银花。',
        choices: [
          {
            text: '「这里也可以是故乡。」',
            friendshipChange: 50,
            response: '她看向你，银色的眼睛里映出你的身影：「也许……你说得对。有人在的地方，就是故乡。」'
          },
          {
            text: '默默将银花捡起，递给她。',
            friendshipChange: 40,
            response: '她接过银花，捧在手心。花开始发出温暖的光：「原来……被人记住的感觉，是这样的。」'
          }
        ]
      }
    ]
  },
  {
    id: 'gui_nv_heart_3',
    npcId: 'gui_nv',
    requiredFriendship: 2400,
    title: '归处',
    scenes: [
      { text: '冬至深夜，你发现归女的身形比以往任何时候都要清晰。她站在雪地中，手中捧着一匹银色的锦缎。' },
      { text: '「这是我用一年时间织成的。」她将锦缎展开——上面织着桃源乡的四季风景，栩栩如生。' },
      { text: '「春天的桃花，夏天的荷塘，秋天的枫叶，冬天的飞雪……还有，你的身影。」她的脸微微泛红。' },
      {
        text: '她将锦缎递向你：「这是我所有心意织成的。请你收下。」',
        choices: [
          {
            text: '「这是我收到过最美的礼物。」',
            friendshipChange: 80,
            response: '归女的眼眶红了，但她在笑：「谢谢你。因为你，我终于找到了……我的归处。」她的身形变得前所未有的清晰而真实。'
          },
          {
            text: '将锦缎小心地围在她肩上。',
            friendshipChange: 60,
            response: '「你……」她的声音颤抖，「为什么不留给自己？」你摇摇头。归女低声说：「……傻瓜。」但她将锦缎紧紧裹住了自己。'
          }
        ]
      }
    ]
  }
]

/** 根据NPC ID获取心事件列表 */
export const getHiddenNpcHeartEvents = (npcId: string): HeartEventDef[] => {
  return HIDDEN_NPC_HEART_EVENTS.filter(e => e.npcId === npcId)
}

/** 根据事件ID获取心事件 */
export const getHiddenNpcHeartEventById = (eventId: string): HeartEventDef | undefined => {
  return HIDDEN_NPC_HEART_EVENTS.find(e => e.id === eventId)
}
