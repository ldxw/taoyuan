<!DOCTYPE html>
<html lang="zh-CN">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>桃源乡 — 文字田园物语</title>
    <meta name="description" content="一款像素中国风文字田园模拟经营游戏，灵感来自星露谷物语。春耕夏种秋收冬藏，经营你的世外桃源。" />
    <meta name="keywords" content="桃源乡,田园物语,文字游戏,模拟经营,像素游戏,中国风" />
    <meta name="theme-color" content="#1a1a1a" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="桃源乡" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="桃源乡 — 文字田园物语" />
    <meta property="og:description" content="像素中国风文字田园模拟经营游戏，春耕夏种秋收冬藏，经营你的世外桃源。" />
    <style>
      html,
      body {
        background: #0d1117;
        margin: 0;
      }

      #app:empty {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        color: #8b949e;
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
      }

      #app:empty::after {
        content: '桃源乡加载中...';
      }
    </style>
  </head>

  <body>
    <div id="app"></div>
    <noscript>
      <p style="text-align:center;padding:2rem;color:#e8e4d9;background:#1a1a1a;min-height:100vh;">
        桃源乡需要启用 JavaScript 才能运行。
      </p>
    </noscript>
    <!-- WebView 兼容性检测：不支持 CSS 自定义属性则引导至网页版 -->
    <script>
      (function () {
        var supported = true;
        try {
          // 检测 CSS 自定义属性 (CSS Custom Properties)
          if (!window.CSS || !window.CSS.supports || !CSS.supports('color', 'var(--t)')) {
            supported = false;
          }
        } catch (e) {
          supported = false;
        }
        if (!supported) {
          var app = document.getElementById('app');
          if (app) app.style.display = 'none';
          var mask = document.createElement('div');
          mask.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:#1a1a1a;color:#e8e4d9;display:flex;align-items:center;justify-content:center;z-index:99999;font-family:sans-serif;';
          mask.innerHTML = '<div style="text-align:center;padding:24px;max-width:360px;">'
            + '<p style="font-size:20px;margin:0 0 16px;color:#c8a45c;">桃源乡</p>'
            + '<p style="font-size:14px;line-height:1.6;margin:0 0 24px;">检测到当前浏览器版本较低，无法正常显示游戏样式。<br>请使用以下方式游玩：</p>'
            + '<a href="https://taoyuan.wenzi.games" style="display:inline-block;padding:10px 24px;background:#c8a45c;color:#1a1a1a;text-decoration:none;font-size:14px;border-radius:2px;">前往网页版游玩</a>'
            + '<p style="font-size:12px;color:#6b7280;margin:16px 0 0;">推荐使用 Chrome、Edge、Firefox<br>或 Safari 最新版本</p>'
            + '</div>';
          document.body.appendChild(mask);
        }
      })();
    </script>
    <script type="module" src="/src/main.ts"></script>
    <!-- 统计勿删 -->
    <script>
      !function (p) { "use strict"; !function (t) { var s = window, e = document, i = p, c = "".concat("https:" === e.location.protocol ? "https://" : "http://", "sdk.51.la/js-sdk-pro.min.js"), n = e.createElement("script"), r = e.getElementsByTagName("script")[0]; n.type = "text/javascript", n.setAttribute("charset", "UTF-8"), n.async = !0, n.src = c, n.id = "LA_COLLECT", i.d = n; var o = function () { s.LA.ids.push(i) }; s.LA ? s.LA.ids && o() : (s.LA = p, s.LA.ids = [], o()), r.parentNode.insertBefore(n, r) }() }({ id: "L5qLQC2HtBt5AGKV", ck: "L5qLQC2HtBt5AGKV", autoTrack: true, hashMode: true });
    </script>
  </body>

</html>